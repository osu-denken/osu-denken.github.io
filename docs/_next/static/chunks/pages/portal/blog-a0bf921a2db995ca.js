(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[665],{2577:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/portal/blog",function(){return a(4332)}])},3646:e=>{e.exports={container:"Page_container__4TqKj",main:"Page_main__MOW5Q",bold:"Page_bold__FOjUO",code:"Page_code__gdauj",grid:"Page_grid__YvlVv",card:"Page_card__qrbpT",description:"Page_description__F5wod",title:"Page_title__XbhM_"}},4332:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(7876),o=a(3646),r=a.n(o),l=a(9455),i=a.n(l),s=a(4232);let c=()=>{let[e,t]=(0,s.useState)("new"),[a,o]=(0,s.useState)(""),[l,c]=(0,s.useState)(""),[d,_]=(0,s.useState)(null),[u,p]=(0,s.useState)(null),[h,g]=(0,s.useState)(null);return(0,s.useEffect)(()=>{p(localStorage);let e=localStorage.getItem("idToken"),a=new URLSearchParams(window.location.search);if(!e){let e=encodeURIComponent("portal/blog/"+window.location.search);window.location.href="/?i="+e+"#login"}let n=a.get("msg");n&&o(n);let r=a.get("action");r&&t(r);let l=a.get("page");l&&c(l),"edit"===r&&fetch("https://api.osudenken4dev.workers.dev/v1/blog/get?page="+l,{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{g(e)})},[]),(0,n.jsx)("div",{className:r().container,children:(0,n.jsxs)("main",{className:r().main,children:[a?(0,n.jsx)("div",{className:i().notice,children:a}):"","new"===e?(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{children:"新しく投稿"}),(0,n.jsx)("p",{children:"新しいブログ記事を作成します。"}),(0,n.jsx)("form",{children:(0,n.jsxs)("div",{className:i().inputGroup,children:[(0,n.jsx)("input",{type:"text",name:"page",placeholder:"ファイル名",className:i().portal,value:new Date().toISOString().split("T")[0]+"-"+(new Date().getHours()+new Date().getMinutes()+new Date().getSeconds()),required:!0}),(0,n.jsx)("button",{type:"button",className:i().portal,onClick:()=>{let e=document.querySelector('input[name="page"]').value.trim();if(!e)return void o("ファイル名を入力してください。");let t=encodeURIComponent(e);window.location.href="/portal/blog/?action=edit&page=".concat(t)},children:"編集"})]})})]}):(0,n.jsxs)("div",{children:[(0,n.jsxs)("h1",{children:[l," の編集"]}),(0,n.jsxs)("form",{children:[(0,n.jsx)("div",{className:i().inputGroup,children:(0,n.jsx)("textarea",{name:"content",style:{width:"100%",height:"50vh"},className:i().portal,defaultValue:h?h.content:""})}),(0,n.jsx)("button",{type:"button",className:i().portal,onClick:()=>{let e=document.querySelector('textarea[name="content"]').value;fetch("https://api.osudenken4dev.workers.dev/blog/update",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("idToken"),page:l},body:e}).then(e=>e.json()).then(e=>{e.success?o("保存しました。"):o("保存に失敗しました。")})},children:"保存"})]})]})]})})}},9455:e=>{e.exports={tabContainer:"Portal_tabContainer__VrhzM",tabButton:"Portal_tabButton__GgWUH",active:"Portal_active__zVMzA",tabContent:"Portal_tabContent__j21tP",portal:"Portal_portal__UHmCy",inputGroup:"Portal_inputGroup__kOtrD",notice:"Portal_notice__fvfef",grid:"Portal_grid__MBxHh",card:"Portal_card__QB5cC"}}},e=>{e.O(0,[636,593,792],()=>e(e.s=2577)),_N_E=e.O()}]);