(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[448],{1861:(e,r,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/_register",function(){return a(4609)}])},3646:e=>{e.exports={container:"Page_container__4TqKj",main:"Page_main__MOW5Q",bold:"Page_bold__FOjUO",code:"Page_code__gdauj",grid:"Page_grid__YvlVv",card:"Page_card__qrbpT",description:"Page_description__F5wod",title:"Page_title__XbhM_"}},4609:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>o});var s=a(7876),t=a(3646),n=a.n(t),i=a(4232);let o=()=>{let[e,r]=(0,i.useState)(null);return(0,i.useEffect)(()=>{r(localStorage),localStorage.getItem("idToken")&&(alert("すでにログインしているため、ポータルページに移動します。"),window.location.href="/portal")},[]),(0,s.jsx)("div",{className:n().container,children:(0,s.jsxs)("main",{className:n().main,children:[(0,s.jsx)("h1",{children:"新規ユーザー登録"}),(0,s.jsxs)("p",{className:n().description,children:["大産大 電研部員のみが利用できるユーザーを作成します。",(0,s.jsx)("br",{}),"なお、部員ではない場合は却下されます。"]}),(0,s.jsxs)("form",{onSubmit:function(e){e.preventDefault();let r=new FormData(e.currentTarget),a=r.get("email");fetch("https://api.osudenken4dev.workers.dev/user/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:r.get("password"),passphrase:r.get("passphrase")})}).then(e=>e.json()).then(e=>e.error?"EMAIL_EXISTS"===e.error.message?void alert("そのメールアドレスは既に使われています。"):void console.error("Registration error:",e):e.body&&"Invalid passphrase"===e.body.error?void alert("合言葉が間違っています。"):void(e.success?(alert("ユーザー登録が完了しました。ログインページに移動します。"),window.location.href="/?i=portal/#login"):(console.error("Registration failed:",e),alert("ユーザー登録に失敗しました。"))))},children:[(0,s.jsxs)("label",{children:["学籍番号もしくはメールアドレス (osaka-sandai.ac.jpのみ)",(0,s.jsx)("input",{type:"text",name:"email"})]}),(0,s.jsxs)("label",{children:["パスワード",(0,s.jsx)("input",{type:"password",name:"password"})]}),(0,s.jsxs)("label",{children:["合言葉",(0,s.jsx)("input",{type:"text",name:"passphrase"})]}),(0,s.jsx)("br",{}),(0,s.jsx)("input",{type:"submit",value:"作成する"})]})]})})}}},e=>{e.O(0,[636,593,792],()=>e(e.s=1861)),_N_E=e.O()}]);