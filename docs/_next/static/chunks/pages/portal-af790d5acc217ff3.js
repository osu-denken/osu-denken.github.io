(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130],{4357:e=>{e.exports={container:"Page_container__4TqKj",main:"Page_main__MOW5Q",bold:"Page_bold__FOjUO",code:"Page_code__gdauj",grid:"Page_grid__YvlVv",card:"Page_card__qrbpT",description:"Page_description__F5wod",title:"Page_title__XbhM_"}},5816:e=>{e.exports={tabContainer:"Portal_tabContainer__VrhzM",tabButton:"Portal_tabButton__GgWUH",active:"Portal_active__zVMzA",tabContent:"Portal_tabContent__j21tP",portal:"Portal_portal__UHmCy",inputGroup:"Portal_inputGroup__kOtrD",notice:"Portal_notice__fvfef"}},6299:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/portal",function(){return a(9076)}])},9076:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var n=a(7876),s=a(4357),l=a.n(s),o=a(5816),r=a.n(o),i=a(4232),c=a(8230),d=a.n(c);let u=()=>{let[e,t]=(0,i.useState)("main"),[a,s]=(0,i.useState)("Unknown"),[o,c]=(0,i.useState)(""),[u,_]=(0,i.useState)("");async function p(e,t){try{let a=await fetch("https://api.osudenken4dev.workers.dev/user/update",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("idToken"))},body:JSON.stringify({[e]:t})}),n=await a.json();if(n.displayName)return console.log("".concat(e," updated successfully.")),!0;return console.error("Failed to update ".concat(e,".")),console.log(n),!1}catch(e){return console.error("Error:",e),!1}}return(0,i.useEffect)(()=>{localStorage.getItem("idToken")||(window.location.href="/?i=portal/#login");let e=localStorage.getItem("name");e&&s(e);let t=new URLSearchParams(window.location.search),a=t.get("msg");a&&_(a),t.get("tab")},[]),(0,n.jsx)("div",{className:l().container,children:(0,n.jsxs)("main",{className:l().main,children:[u?(0,n.jsx)("div",{className:r().notice,children:u}):"",(0,n.jsxs)("div",{className:r().tabContainer,children:[(0,n.jsx)("button",{className:"".concat(r().tabButton," ").concat("main"===e?r().active:""),onClick:()=>t("main"),children:"ポータル"}),(0,n.jsx)("button",{className:"".concat(r().tabButton," ").concat("settings"===e?r().active:""),onClick:()=>t("settings"),children:"設定"}),(0,n.jsx)("button",{className:"".concat(r().tabButton," ").concat("blog"===e?r().active:""),onClick:()=>t("blog"),children:"ブログ"})]}),(0,n.jsxs)("div",{className:r().tabContent,children:["main"===e&&(0,n.jsxs)("div",{className:r().tabPane,children:[(0,n.jsxs)("h1",{id:"title",children:["ようこそ、",a," さん"]}),(0,n.jsx)("p",{className:l().description})]}),"settings"===e&&(0,n.jsxs)("div",{className:r().tabPane,children:[(0,n.jsx)("h2",{children:"ユーザー設定"}),(0,n.jsx)("h3",{children:"ユーザー名"}),(0,n.jsxs)("p",{className:l().description,children:["デフォルトでは学籍番号が設定されています。",(0,n.jsx)("br",{}),"変更する場合は以下の入力欄に新しいユーザー名を入力し、更新ボタンを押してください。"]}),(0,n.jsxs)("div",{className:r().inputGroup,children:[(0,n.jsx)("input",{type:"text",id:"usernameInput",placeholder:"ユーザー名",value:a,onChange:e=>s(e.target.value),className:r().portal}),(0,n.jsx)("button",{onClick:()=>{let e=document.getElementById("usernameInput").value.trim();e?(localStorage.setItem("name",e),p("name",e).then(e=>{e?_("ユーザー名を更新しました。"):alert("ユーザー名の更新に失敗しました。")})):alert("有効なユーザー名を入力してください。")},className:r().portal,children:"更新"})]}),(0,n.jsx)("br",{}),(0,n.jsx)("h3",{children:"メールアドレス"}),(0,n.jsxs)("p",{className:l().description,children:["デフォルトでは大学から付与されたメールアドレスが設定されています。",(0,n.jsx)("br",{}),"変更する場合は以下の入力欄に新しいメールアドレスを入力し、更新ボタンを押してください。"]}),(0,n.jsxs)("div",{className:r().inputGroup,children:[(0,n.jsx)("input",{type:"text",id:"emailInput",placeholder:"メールアドレス",value:o,onChange:e=>c(e.target.value),className:r().portal}),(0,n.jsx)("button",{onClick:()=>{let e=document.getElementById("emailInput").value.trim();e?p("email",e).then(e=>{e?_("メールアドレスを更新しました。"):alert("メールアドレスの更新に失敗しました。")}):alert("有効なメールアドレスを入力してください。")},className:r().portal,children:"更新"})]}),(0,n.jsx)("h3",{children:"パスワードの再設定"}),(0,n.jsxs)("p",{className:l().description,children:["パスワードを再設定するには",(0,n.jsx)(d(),{href:"/resetpass/",children:"こちら"}),"からメールアドレスを入力してください。"]})]}),"blog"===e&&(0,n.jsxs)("div",{className:r().tabPane,children:[(0,n.jsx)("h2",{children:"ブログ"}),(0,n.jsx)("p",{className:l().description})]})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(6299)),_N_E=e.O()}]);